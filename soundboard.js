let lastUpdate = "3/13/2023 (v6.5.0)"
let sound_data = [
    {
        name: "-999 Social Credit",
        id: "999-social-credit-siren",
        path: "Soundboard/999-social-credit-siren.mp3",
        new: true
    },
    {
        name: "Aw Hell Nah Man",
        id: "aw-hell-nah-man",
        path: "Soundboard/aw-hell-nah-man.mp3",
        new: true
    },
    {
        name: "Aw Sh*t! Here we go again",
        id: "gta-here-we-go-again",
        path: "Soundboard/gta-here-we-go-again.mp3",
        new: true
    },
    {
        name: "Bing Chilling ðŸ¥¶",
        id: "bing-chilling",
        path: "Soundboard/bing-chilling_fcdGgUc.mp3",
        new: true
    },
    {
        name: "Dedotaded Wam",
        id: "dedotaded_wam",
        path: "Soundboard/DEDOTADED WAM.mp3",
        new: true
    },
    {
        name: "Directed by Robert B",
        id: "directed-by-robert-b",
        path: "Soundboard/directed-by-robert-b.mp3",
        new: true
    },
    {
        name: "Deja Vu",
        id: "deja-vu",
        path: "Soundboard/deja-vu.mp3",
        new: true
    },
    {
        name: "EE Sports",
        id: "ea-sports-meme",
        path: "Soundboard/ea-sports-meme.mp3",
        new: true
    },
        {
        name: "Gangsters Paradise",
        id: "gangsters_paradise",
        path: "Soundboard/gangsters_paradise.mp3",
        new: true
    },
    {
        name: "GG's Bro",
        id: "ggs-bro",
        path: "Soundboard/ggs-bro.mp3",
        new: true
    },
    {
        name: "God Damn",
        id: "god-damn",
        path: "Soundboard/god-damn-1.mp3",
        new: true
    },
    {
        name: "Helicopter Helicopter",
        id: "helicopter-meme",
        path: "Soundboard/helicopter-meme.mp3",
        new: true
    },
    {
        name: "Illuminati ðŸ›†",
        id: "illuminati",
        path: "Soundboard/ILLUMINATI.mp3",
        new: true
    },
    {
        name: "Ladies and Gentlemen, We Got 'Em",
        id: "ladies-and-gentlement-we-got-em",
        path: "Soundboard/ladies-and-gentlement-we-got-em.mp3",
        new: true
    },
    {
        name: "LETS GO",
        id: "lets-go-meme",
        path: "Soundboard/lets-go-meme.mp3",
        new: true
    },
    {
        name: "Minecraft Potion Drinking",
        id: "minecraft-potion-drinking-sound-effect",
        path: "Soundboard/minecraft-potion-drinking-sound-effect-1.mp3",
        new: true
    },
    {
        name: "MrBeast Phonk",
        id: "mr-beast-phonk-meme",
        path: "Soundboard/mr-beast-phonk-meme.mp3",
        new: true
    },
    {
        name: "MrBeast Rap Battle",
        id: "mrbeast_rap_battle",
        path: "Soundboard/mrbeast rap battle.mp3",
        new: true
    },
    {
        name: "Nani",
        id: "nani-meme-sound-effect",
        path: "Soundboard/nani-meme-sound-effect.mp3",
        new: true
    },
    {
        name: "Never Done That",
        id: "never_done_that",
        path: "Soundboard/NEVER DONE THAT.mp3",
        new: true
    },
    {
        name: "Ninja Stream Sniping",
        id: "ninja-stream-sniping",
        path: "Soundboard/ninja-stream-sniping.mp3",
        new: true
    },
    {
        name: "Oh no no no Tik Tok",
        id: "oh-no-no-no-tik-tok-song-sound-effect",
        path: "Soundboard/oh-no-no-no-tik-tok-song-sound-effect.mp3",
        new: true
    },
    {
        name: "Outro",
        id: "outro-song",
        path: "Soundboard/outro-song_oqu8zAg.mp3",
        new: true
    },
    {
        name: "Sanic",
        id: "sanic",
        path: "Soundboard/SANIC.mp3",
        new: true
    },
    {
        name: "Shooting Stars",
        id: "shooting-stars",
        path: "Soundboard/shooting-stars.mp3",
        new: true
    },
        {
        name: "Snopp Dogg",
        id: "snopp_dogg",
        path: "Soundboard/snopp_dogg.mp3",
        new: true
    },
    {
        name: "Shots Fired",
        id: "shots_fired",
        path: "Soundboard/SHOTS FIRED.mp3",
        new: true
    },
    {
        name: "Tactical Nuke",
        id: "tactical_nule",
        path: "Soundboard/tactical nuke.mp3",
        new: true
    },
        {
        name: "That's Class",
        id: "thats-class",
        path: "Soundboard/thats-class.mp3",
        new: true
    },
    {
        name: "This is a certified hood classic",
        id: "this-a-certified-hood-classic",
        path: "Soundboard/this-is-a-certified-hood-classic.mp3",
        new: true
    },
    {
        name: "Whatcha Say",
        id: "whatcha_say",
        path: "Soundboard/Whatcha Say.mp3",
        new: true
    },
    {
        name: "Wombo Combo",
        id: "wombo_combo",
        path: "Soundboard/WOMBO COMBO.mp3",
        new: true
    },
        {
        name: "Wide Putin",
        id: "wide-putin",
        path: "Soundboard/wide-putin.mp3",
        new: true
    },
    {
        name: "Why do I hear boss music?",
        id: "why-do-i-hear-boss-music",
        path: "Soundboard/why-do-i-hear-boss-music.mp3",
        new: true
    },
    {
        name: "9 + 10",
        id: "9+10=21",
        path: "Soundboard/9+10=21.mp3",
    },
    {
        name: "AUUGHHH",
        id: "auughhh",
        path: "Soundboard/AUUGHHH.mp3",
    },
    {
        name: "Censor Beep",
        id: "censor-beep-sound-effect",
        path: "Soundboard/Censor-Beep-Sound-Effect.mp3",
    },
    {
        name: "DUN DUN",
        id: "dun_dun",
        path: "Soundboard/DUN_DUN.mp3",
    },
    {
        name: "Win Error",
        id: "win_error",
        path: "Soundboard/WinError.mp3",
    },
    {
        name: "Airhorn",
        id: "airhorn",
        path: "Soundboard/airhorn.mp3",
    },
    {
        name: "Android Notif",
        id: "android_notif",
        path: "Soundboard/android-notif.mp3",
    },
    {
        name: "Anime Wow",
        id: "anime_wow",
        path: "Soundboard/anime-wow.mp3",
    },
    {
        name: "Bababooey",
        id: "bababooey",
        path: "Soundboard/bababooey.mp3",
    },
    {
        name: "Ba-Dum-Tss",
        id: "badumtss",
        path: "Soundboard/badumtss.mp3",
    },
    {
        name: "Bazinga",
        id: "bazinga",
        path: "Soundboard/bazinga.mp3",
    },
    {
        name: "Ben Yes",
        id: "ben-yes",
        path: "Soundboard/ben-yes.mp3",
    },
    {
        name: "Bonk",
        id: "bonk",
        path: "Soundboard/bonk.mp3",
    },
    {
        name: "Bruh",
        id: "bruh",
        path: "Soundboard/bruh.mp3",
    },
    {
        name: "Bye Have A Great Time",
        id: "bye-have-a-great-time",
        path: "Soundboard/bye-have-a-great-time.mp3",
    },
    {
        name: "Clash of Clans",
        id: "coc-intro",
        path: "Soundboard/coc-intro.mp3",
    },
    {
        name: "Coffin Dance",
        id: "coffin-dance",
        path: "Soundboard/coffin-dance.mp3",
    },
    {
        name: "Clash Royale Intro",
        id: "cr-intro",
        path: "Soundboard/cr-intro.mp3",
    },
    {
        name: "It's Crona Time",
        id: "crona-time",
        path: "Soundboard/crona-time.mp3",
    },
    {
        name: "Cut G",
        id: "cut-g",
        path: "Soundboard/cut-g.mp3",
    },
    {
        name: "Dababy Lets Go",
        id: "dababy-lets-go",
        path: "Soundboard/dababy-lets-go.mp3",
    },
    {
        name: "Now Thats a Lot of Damage",
        id: "damage",
        path: "Soundboard/damage.mp3",
    },
    {
        name: "Deez Nuts",
        id: "deez-nutz",
        path: "Soundboard/deez-nutz.mp3",
    },
    {
        name: "Discord Notification",
        id: "discord-notification",
        path: "Soundboard/discord-notification.mp3",
    },
    {
        name: "Earape Bass",
        id: "earape-base",
        path: "Soundboard/earape-base.mp3",
    },
    {
        name: "Emotional Damage",
        id: "emotional-damage",
        path: "Soundboard/emotional-damage.mp3",
    },
    {
        name: "Fart with Reverb",
        id: "fart-with-reverb",
        path: "Soundboard/fart-with-reverb.mp3",
    },
    {
        name: "Fart",
        id: "fart",
        path: "Soundboard/fart.mp3",
    },
    {
        name: "FBI OPEN UP",
        id: "fbi-open-up",
        path: "Soundboard/fbi-open-up.mp3",
    },
    {
        name: "Five Nights At Freddys Scream",
        id: "five-nights-at-freddys-full-scream",
        path: "Soundboard/five-nights-at-freddys-full-scream.mp3",
    },
    {
        name: "Our Table... It's Broken Full",
        id: "full-table-broken",
        path: "Soundboard/full-table-broken.mp3",
    },
    {
        name: "Gas Gas Gas",
        id: "gas-gas-gas",
        path: "Soundboard/gas-gas-gas.mp3",
    },
    {
        name: "Goofy Yell",
        id: "goofy-yell",
        path: "Soundboard/goofy-yell.mp3",
    },
    {
        name: "GTA5 Wasted",
        id: "gta5-wasted",
        path: "Soundboard/gta5-wasted.mp3",
    },
    {
        name: "Guess Who Back... Back Again",
        id: "guess-who-back",
        path: "Soundboard/guess-who-back.mp3",
    },
    {
        name: "Hello There",
        id: "hello-there",
        path: "Soundboard/hello-there.mp3",
    },
    {
        name: "Heyyyy Yaaa",
        id: "hey-ya",
        path: "Soundboard/hey-ya.mp3",
    },
    {
        name: "Hiiiiiyah",
        id: "hiyah",
        path: "Soundboard/hiyah.mp3",
    },
    {
        name: "Hog Rider",
        id: "hog-rider",
        path: "Soundboard/hog-rider.mp3",
    },
    {
        name: "I Love Refrigerators",
        id: "i_love_refrigerators",
        path: "Soundboard/i_love_refrigerators.mp3",
    },
    {
        name: "I Will Send You To Jesus",
        id: "i-will-send-you-to-jesus",
        path: "Soundboard/i-will-send-you-to-jesus.mp3",
    },
    {
        name: "Imposter à¶ž",
        id: "imposter",
        path: "Soundboard/imposter.mp3",
    },
    {
        name: "John Cena Intro",
        id: "john-cena-intro",
        path: "Soundboard/john-cena-intro.mp3",
    },
    {
        name: "Lebron James",
        id: "lebron-james",
        path: "Soundboard/lebron-james.mp3",
    },
    {
        name: "It's Me Mario",
        id: "mario",
        path: "Soundboard/mario.mp3",
    },
    {
        name: "Minecraft Anvil",
        id: "mc-anvil",
        path: "Soundboard/mc-anvil.mp3",
    },
    {
        name: "Morgan Smell",
        id: "morgan-smell",
        path: "Soundboard/morgan-smell.mp3",
    },
    {
        name: "Nestle Crunch",
        id: "nestle-crunch",
        path: "Soundboard/nestle-crunch.mp3",
    },
    {
        name: "Nice",
        id: "nice",
        path: "Soundboard/nice.mp3",
    },
    {
        name: "Nom Nom Nom Nom",
        id: "nomnomnomnom",
        path: "Soundboard/nomnomnomnom.mp3",
    },
    {
        name: "Nope",
        id: "nope",
        path: "Soundboard/nope.mp3",
    },
    {
        name: "Nut",
        id: "nut",
        path: "Soundboard/nut.mp3",
    },
    {
        name: "Oh Baby A Triple",
        id: "oh-baby-a-triple",
        path: "Soundboard/oh-baby-a-triple.mp3",
    },
    {
        name: "Oh No... Our Table... It's Broken",
        id: "ohno-table-broken",
        path: "Soundboard/ohno-table-broken.mp3",
    },
    {
        name: "oof",
        id: "oof",
        path: "Soundboard/oof.mp3",
    },
    {
        name: "Fortnite Death",
        id: "radio-beep",
        path: "Soundboard/radio-beep.mp3",
    },
    {
        name: "Rick Roll >:)",
        id: "rick-roll",
        path: "Soundboard/rick-roll.mp3",
    },
    {
        name: "Roblox Num Num",
        id: "roblox-num-num",
        path: "Soundboard/roblox-num-num.mp3",
    },
    {
        name: "Run",
        id: "run",
        path: "Soundboard/run.mp3",
    },
    {
        name: "Sad Song",
        id: "sad_song",
        path: "Soundboard/sad_song.mp3",
    },
    {
        name: "Sad Violin",
        id: "sad-violin",
        path: "Soundboard/sad-violin.mp3",
    },
    {
        name: "Sans",
        id: "sans",
        path: "Soundboard/sans.mp3",
    },
    {
        name: "Screaming Sheep",
        id: "sheep",
        path: "Soundboard/sheep.mp3",
    },
    {
        name: "Sicko Mode",
        id: "sicko",
        path: "Soundboard/sicko.mp3",
    },
    {
        name: "Sike",
        id: "sike",
        path: "Soundboard/sike.mp3",
    },
    {
        name: "Skull Trumpet",
        id: "skull-trumpet",
        path: "Soundboard/skull-trumpet.mp3",
    },
    {
        name: "Sloppy Fart",
        id: "sloppy-fart",
        path: "Soundboard/sloppy-fart.mp3",
    },
    {
        name: "Spongebob Dolphin",
        id: "spongebob-dolphin",
        path: "Soundboard/spongebob-dolphin.mp3",
    },
    {
        name: "Sprite Cranberry",
        id: "sprite-cranberry",
        path: "Soundboard/sprite-cranberry.mp3",
    },
    {
        name: "Stop the Cap ðŸ§¢",
        id: "stop-the-cap",
        path: "Soundboard/stop-the-cap.mp3",
    },
    {
        name: "Taco Bell",
        id: "taco-bell",
        path: "Soundboard/taco-bell.mp3",
    },
    {
        name: "Ben Ho Ho Ho",
        id: "talking-ben-ho-ho-ho",
        path: "Soundboard/talking-ben-ho-ho-ho.mp3",
    },
    {
        name: "To Be Continued",
        id: "to-be-continued",
        path: "Soundboard/to-be-continued.mp3",
    },
    {
        name: "Trololo",
        id: "trololo",
        path: "Soundboard/trololo.mp3",
    },
    {
        name: "I Like Turtles",
        id: "turtles",
        path: "Soundboard/turtles.mp3",
    },
    {
        name: "Vine Boom",
        id: "vine-boom",
        path: "Soundboard/vine-boom.mp3",
    },
    {
        name: "What the Dog Doin",
        id: "what-the-dog-doin",
        path: "Soundboard/what-the-dog-doin.mp3",
    },
    {
        name: "Who Touch My",
        id: "who-touch-my",
        path: "Soundboard/who-touch-my.mp3",
    },
    {
        name: "Why Are You Running?",
        id: "why-are-you-running",
        path: "Soundboard/why-are-you-running.mp3",
    },
    {
        name: "Wii Sports Aww",
        id: "wii-sports-aww",
        path: "Soundboard/wii-sports-aww.mp3",
    },
    {
        name: "Win XP Shutdown",
        id: "winxpshutdown",
        path: "Soundboard/winxpshutdown.mp3",
    },
    {
        name: "Woody Woodpecker Laugh",
        id: "woody-woodpecker-laugh",
        path: "Soundboard/woody-woodpecker-laugh.mp3",
    },
    {
        name: "Wrong",
        id: "wrong",
        path: "Soundboard/wrong.mp3",
    },
    {
        name: "X Games Mode",
        id: "x-games-mode",
        path: "Soundboard/x-games-mode.mp3",
    },
    {
        name: "Yeah",
        id: "yeah",
        path: "Soundboard/yeah.mp3",
    },
    {
        name: "Yeet",
        id: "yeet",
        path: "Soundboard/yeet.mp3",
    },
    {
        name: "Yoda Laugh",
        id: "yoda-laugh",
        path: "Soundboard/yoda-laugh.mp3",
    },
    {
        name: "Yummy",
        id: "yummy",
        path: "Soundboard/yummy.mp3",
    },
    // {
    //     name: "bozo",
    //     id: "bozo",
    //     path: "Soundboard/bozo.mp3",
    // },
]

document.getElementById("soundcount").innerHTML = `Sounds: ${sound_data.length}<br>Updated: ${lastUpdate}`

loadSounds()
function loadSounds(){
    var count = 0
    var containers = []
    // var favorities = []

    sound_data.forEach(sound => {
        var div = document.createElement("div");
        div.className = "soundboard"
        div.id = sound.id
        div.onclick = function(){ playSound(sound.id) }

        var audio = document.createElement("audio")
        audio.className = "sound"
        audio.id = sound.id + "_audio"
        audio.src = sound.path
        audio.preload = "auto"
        div.appendChild(audio)

        var soundboard_click = document.createElement("a")
        soundboard_click.className = "soundboard_click"
        soundboard_click.id = sound.id + "_click"

        if(sound.new === true){
            var newbanner = document.createElement("div")
            newbanner.id = "newsoundbanner"
            newbanner.innerHTML = "<span style='transform: translate(-4px, -4px); position: absolute; left: 16px'>New!</span>"
            soundboard_click.appendChild(newbanner)
        }

        var soundboard_title = document.createElement("div")
        soundboard_title.className = "soundboard_title"
        soundboard_title.id = "title"
        soundboard_title.innerText = sound.name
        soundboard_click.appendChild(soundboard_title)

        var play_icon = document.createElement("i")
        play_icon.className = "bx bx-play icon"
        play_icon.id = "play_icon"
        play_icon.setAttribute("tag", sound.id + "_play_icon")

        var soundboard_circle = document.createElementNS("http://www.w3.org/2000/svg", "svg")
        soundboard_circle.setAttributeNS(null, "id", sound.id + "_circle")
        soundboard_circle.setAttributeNS(null, "viewBox", "0 0 36 36")
        soundboard_circle.setAttributeNS(null, "class", "circle-svg soundboard-circle")

        var around = document.querySelector("#lol").cloneNode(true)
        // around.classList = "around"
        around.setAttribute("id", sound.id + "_around")
        // around.setAttribute("stroke-dasharray", "100, 100")
        // around.setAttribute("b", "M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831")
        soundboard_circle.appendChild(around)

        var percent = document.querySelector("#lol").cloneNode(true)
        percent.classList = "percent"
        percent.setAttribute("id", sound.id + "_percent")
        percent.setAttribute("stroke-dasharray", "0, 100")
        percent.setAttribute("b", "M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831")
        soundboard_circle.appendChild(percent)

        play_icon.appendChild(soundboard_circle)

        soundboard_click.appendChild(play_icon)

        div.appendChild(soundboard_click)

        containers.push(div)
    })

    containers.forEach(container => {
        // referenceNode = document.getElementById("search-box")
        // referenceNode.parentNode.insertBefore(container, referenceNode.nextSibling)
        document.getElementById("gamebar").appendChild(container)
    })
}

function playSound(id){
    var audio = document.getElementById(id + "_audio")
    audio.play()

    document.getElementById(id).onclick = function(){ stopSound(id) }

    document.getElementById(id).style.boxShadow = `0 0 10px ${localStorage.getItem("themeHex") || "#695CFE"}`

    const interval = setInterval(function () {
        var audio = document.getElementById(id + "_audio")
        var percent = Math.trunc(audio.currentTime / audio.duration * 100)
        if(percent === 0){
            document.getElementById(id + "_circle").style.display = "none"
            document.getElementById(id + "_click").getElementsByClassName("icon")[0].classList = "bx bx-dots-horizontal-rounded icon"
        } else {
            document.getElementById(id + "_circle").style.display = "block"
            document.getElementById(id + "_click").getElementsByClassName("icon")[0].classList = "bx bx-pause icon"
        }
        if(percent === 100 || audio.paused === true){
            document.getElementById(id + "_circle").style.display = "none"
            document.getElementById(id + "_click").getElementsByClassName("icon")[0].classList = "bx bx-play icon"
            document.getElementById(id).style.boxShadow = "none"
            document.getElementById(id).onclick = function(){ playSound(id) }
            return clearInterval(interval)
        }

        document.getElementById(id + "_percent").style.strokeDasharray = `${percent}, 100`
    }, 100);
}

function stopSound(id){
    var audio = document.getElementById(id + "_audio")
    audio.load()
}

function playAll(){
    createAlertBox({ text: "Loading Sounds, Please Wait", time: 5000 })
    for(let i = 0; i < sound_data.length; i++){
        var audio = document.getElementById(sound_data[i].id + "_audio")
        audio.play()
    }
}

function stopAll(){
    for(let i = 0; i < sound_data.length; i++){
        var audio = document.getElementById(sound_data[i].id + "_audio")
        var percent = Math.trunc(audio.currentTime / audio.duration * 100)
        if(percent === 0) continue;
        audio.load()

        document.getElementById(sound_data[i].id + "_circle").style.display = "none"
        document.getElementById(sound_data[i].id + "_click").getElementsByClassName("icon")[0].classList = "bx bx-play icon"
        document.getElementById(sound_data[i].id).style.boxShadow = "none"
        document.getElementById(sound_data[i].id).onclick = function(){ playSound(sound_data[i].id) }
    }
}

function searchSoundboard(){
    let input = document.getElementById("searchbarSoundboard").value
    input = input.toLowerCase()
    let x = document.querySelectorAll(".soundboard")
    var titles = document.getElementsByClassName("soundboard_title")
    var list = []

    for(i = 0; i < titles.length; i++){
        list.push(titles[i].textContent)
    }

    var options = {
        includeScore: true,
        threshold: 0.4,
    }
    var fuse = new Fuse(list, options)
    var result = fuse.search(input)
    var final = []
    for(i = 0; i < result.length; i++){
        final.push(result[i].item)
    }

    var xArray = Array.from(x)
    var matching = xArray.filter(x => final.includes(x.getElementsByClassName("soundboard_title")[0].textContent))
    var not_matching = xArray.filter(x => !final.includes(x.getElementsByClassName("soundboard_title")[0].textContent))
    matching.forEach(item => { item.style.display = "inline-table" })
    not_matching.forEach(item => { item.style.display = "none" })

    if(input === ""){
        x.forEach(x => { x.style.display = "inline-table" })
    }

    // for(i = 0; i < x.length; i++){
    //     if(!x[i].getElementsByClassName("soundboard_click")[0].getElementsByClassName("soundboard_title")[0].textContent.toLowerCase().includes(input)){
    //         x[i].style.display = "none";
    //     } else {
    //         x[i].style.display = "inline-table"
    //     }
    // }
}
